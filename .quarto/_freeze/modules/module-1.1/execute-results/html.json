{
  "hash": "73c20dda3acff70cf1d27b90657b5679",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"Module 1.1\"\nsubtitle: \"Bar Charts and Histograms\"\nformat: \n  html:\n    code-link: true\nhighlight-style: atom-one\n# filters:\n#   - webr\nexecute:\n  echo: true\n  message: false\n  warning: false\n---\n\n\n::: {.callout-tip}\n## Prework\n\n- Have a look at the documentation for [ggplot2](https://ggplot2.tidyverse.org/)\n- Familiarize yourself with the `ggplot2` [cheatseet](https://posit.co/wp-content/uploads/2022/10/data-visualization-1.pdf)\n- Generate a quarto document named \"module-2.qmd\" in youe modules project folder so that you can code along with me\n\nIf you have installed the Tidyverse, then you should already have the packages for this model, including `ggplot2`. You can go ahead and load `ggplot2` along with `readr` and `dplyr`. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(readr)\nlibrary(dplyr)\nlibrary(ggplot2)\n```\n:::\n\n\nNote that you could also load these three packages by running `library(tidyverse)`. However, it is good to be intentional about which packages we are loading as we are learning them. \n:::\n\n\n## Overview\n\nLast week we learned how to gather and wrangle data. This week we are going to start visualizing it with the `ggplot2`. In this module we will learn to make bar charts and histograms. \n\nAlong the way we are going to be talking about the \"grammar of graphics\" that `ggplot2` is based on. The \"gg\" in ggplot stands for \"grammar of graphics.\" The grammar of graphics is a layered approach to constructing graphs based on a [book](https://link-springer-com.proxygw.wrlc.org/book/10.1007/0-387-28695-0) by Leland Wilkinson.\n\nThe idea is that each visualization you make is going to contain cerain elements. You will start with some data. Then you will incorporate some \"aesthetics\" which you can think of as the dimensions of the visualization (x-axis, y-axis and color, size or shapes for additional dimensions). Next you identify a geometric obejct that you want to use such as a bar, a line or  a point. From there you can customize various elements of the plot like the title and axis scales and labels. \n\n\n## Bar charts\n\n\n{{< video https://youtu.be/QG1oDJPoIio title = 'Making Bar Charts' >}}\n\n\n\nLet's get started with our first visualization--a basic bar chart. Bar charts are good for comparing data across cases. Our aim here is going to be to summarize levels of democracy across different regions like we did in the last lesson, but this time we will illustrate the differences with a chart. \n\nWe will start by loading in the `dem_summary.csv` file that you can find [here](https://github.com/eteitelbaum/course-datasets/blob/main/dem_summary.csv). Next we will do our first `ggplot()` call. The `ggplot()` function takes two arguments: `data` and `mapping`. `data` refers to the data frame that includes the variables we want to visualize and `mapping` refers to the aesthetics mappings for the visualization. The aesthetics mappings are themselves presented in a quoting function `aes()` that defines the x and y values of the plot along with other aesthetic values like `fill`, `color` and `linetype`. We will focus on x and y values here and return to these additional aesthetic values later.   \n\nAfter our `ggplot()` call, we can add a series of additional functions to define our visualization following a `+` sign. The most important group are the geoms which will define the basic type of plot we want to make. In this case, we are calling `geom_col()` for our histogram and specifying that the fill color should be \"steelblue.\"\n\nFrom there we will further customize our visualization with the `labs()` function to provide a title, axis labels and a caption.  \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_summary <- read_csv(\"data/dem_summary.csv\")\n\nggplot(dem_summary, aes(x = region, y = polyarchy)) + # ggplot call\n  geom_col(fill = \"steelblue\") + # we use geom_col() for a a bar chart\n  labs(\n    x = \"Region\", \n    y = \"Avg. Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    )\n```\n\n::: {.cell-output-display}\n![](module-1.1_files/figure-html/barchart-1.png){width=672}\n:::\n:::\n\n\nThis looks pretty good but frequently we would want the bars of our bar chart to be sorted in order of the values being displayed. Let's go ahead and add the `fct_reorder()` from the [forcats](https://forcats.tidyverse.org/) package to our `aes()` call so that we are reordering the bars based on descending values of the average polyarchy score. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(forcats)\n\nggplot(dem_summary, aes(x = fct_reorder(region, -polyarchy), y = polyarchy)) +\n  geom_col(fill = \"steelblue\") + \n  labs(\n    x = \"Region\", \n    y = \"Avg. Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    )\n```\n\n::: {.cell-output-display}\n![](module-1.1_files/figure-html/reorder-1.png){width=672}\n:::\n:::\n\n\n## Histograms\n\n{{< video https://youtu.be/-1YhCql-gMo title = 'Making Histograms'>}}\n\nNow let's do another `ggplot()` call to make a histogram. We use histograms when we want to show how our data are distributed.  \n\nWe'll start by reading in the `dem_women.csv` file that you can download [here](https://github.com/eteitelbaum/course-datasets/blob/main/dem_women.csv). From there, we call `ggplot()`, specifying the polyarchy score on x-axis. But this time we change the geom to `geom_histogram()`. We also change the title and axis labels to reflect the fact that we are plotting the number of cases falling in each bin. \n\n::: {.callout-note}\nNote that we leave the y-axis blank for the histogram because ggplot will automatically know to plot the number of units in each bin on the y-axis. \n:::\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndem_women_2015 <- read_csv(\"data/dem_women.csv\") |> \n  filter(year == 2015) \n\nggplot(dem_women_2015, aes(x = polyarchy)) + # only specify x for histogram\n  geom_histogram(fill = \"steelblue\") + # geom is a histogram\n  labs(\n    x = \"Polyarchy Score, 2015\", \n    y = \"Count\",\n    title = \"Distribution of democracy, 2015\", \n    caption = \"Source: V-Dem Institute\"\n    )\n```\n\n::: {.cell-output-display}\n![](module-1.1_files/figure-html/histogram-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "module-1.1_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}