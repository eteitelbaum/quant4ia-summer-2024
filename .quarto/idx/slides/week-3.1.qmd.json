{"title":"Categorical Data","markdown":{"yaml":{"title":"Categorical Data","date":"today","date-format":"long","footer":"[IAFF 6501 Website](https://quant4ia.rocks)","logo":"images/iaff6501-logo.png","from":"markdown+emoji","format":{"revealjs":{"theme":["simple","custom.scss"],"transition":"fade","slide-number":true,"chalkboard":true}},"execute":{"echo":false,"message":false,"warning":false,"freeze":"auto"}},"headingText":"Today's Classwork","containsRefs":false,"markdown":"\n\n\n- Download classwork folder for today's class from [here](https://www.dropbox.com/scl/fo/9heicdr2yp11ztow65aku/h?rlkey=p70w8eg5wftr8vll0wkd8cxkf&dl=0)\n\n# Thinking About Data\n\n## \n\nWhat are some ways we can classify data? :sunglasses: :thought_balloon:\n\n. . .\n\n::: {.incremental}\n- anecdotal vs. representative\n- census vs. sample\n- observational vs. experimental\n- categorical vs. numerical\n- discrete vs. continuous\n- cross-sectional vs. time series\n- longitudinal vs. panel\n- unstructured vs. structured\n:::\n\n## \n\nWhat are some ways we can classify data? :sunglasses: :thought_balloon:\n\n- anecdotal vs. representative\n- census vs. sample\n- observational vs. experimental\n- **categorical vs. numerical**\n- **discrete vs. continuous**\n- cross-sectional vs. time series\n- longitudinal vs. panel\n- unstructured vs. structured\n\n## Variable Types\n    \n-   Categorical\n    - Binary - two categories\n    - Nominal - multiple unordered categories\n    - Ordinal - multiple ordered categories\n-   Numerical\n    - Continuous - fractional values (measurement data)\n    - Discrete - non-negative whole numbers (count data)\n\n## \n\nWhat types of variables are these? :thinking:\n\n::: {.incremental}\n-  Is a country a democracy? (yes/no)\n-  Polity (-10 to 10 in 1 unit increments)\n-  V-Dem Polyarchy (0-1 in 0.01 increments)\n-  V-Dem Regimes of the World Measure \n    - closed autocracy | electoral autocracy | electoral democracy | democracy\n- Number of protest events\n- Protest types (sit in, march, strike, etc.)\n:::\n\n# Categorical Data\n\n## V-Dem Regimes of the World Measure\n\n<br>\n\n-   Closed Autocracy\n-   Electoral Autocracy\n-   Electoral Democracy\n-   Liberal Democracy\n\n## Data Setup {.smaller}\n\n```{r}\n#| label: setup\n#| echo: true\n\nlibrary(tidyverse)\nlibrary(vdemdata)\n\nvdem2022 <- vdem |>\n  filter(year == 2022) |>\n  select(\n    country = country_name, \n    regime = v2x_regime, \n    region = e_regionpol_6C\n    ) |>\n  mutate(\n    region = case_match(region, # replace the values in region with country names\n                     1 ~ \"Eastern Europe\", \n                     2 ~ \"Latin America\",  \n                     3 ~ \"Middle East\",   \n                     4 ~ \"Africa\", \n                     5 ~ \"The West\", \n                     6 ~ \"Asia\")\n  ) |>\n  mutate(regime = case_match(regime,\n                    0 ~ \"Closed Autocracy\",\n                    1 ~ \"Electoral Autocracy\",\n                    2 ~  \"Electoral Democracy\",\n                    3 ~  \"Liberal Democracy\")\n  )\n```\n\n## Examine the Data\n\n<br>\n\n```{r}\n#| label: glimpse2\n#| echo: true\n\nglimpse(vdem2022)\n```\n\n## \n\n<br>\n\nLet's count the number of regimes by type...\n\n<br>\n\n```{r}\n#| label: regime-count\n#| echo: true\n\nvdem2022 |>\n  count(regime)\n```\n\n\n## \n\nNow let's visualize the distribution of regimes with a bar plot...\n\n```{r}\n#| label: regime-bar-1\n\nvdem2022 |>\n  ggplot(aes(x = regime)) +\n  geom_bar(fill = \"steelblue\") +\n  labs(\n    x = \"Regime\",\n    y = \"Frequency\",\n    title = \"Regimes of the World in 2022\",\n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## \n\nNow let's visualize the distribution of regimes with a bar plot...\n\n<br>\n\n```{r}\n#| label: regime-bar-2\n#| echo: true\n#| output: false \n\nvdem2022 |>\n  ggplot(aes(x = regime)) +\n  geom_bar(fill = \"steelblue\") +\n  labs(\n    x = \"Regime\",\n    y = \"Frequency\",\n    title = \"Regimes of the World in 2022\",\n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## \n\nNow let's visualize the distribution of regimes with a bar plot...\n\n<br>\n\n```{r}\n#| label: regime-bar-3\n#| echo: true\n#| output: false \n#| code-line-numbers: \"3\"\n\nvdem2022 |>\n  ggplot(aes(x = regime)) +\n  geom_bar(fill = \"steelblue\") +\n  labs(\n    x = \"Regime\",\n    y = \"Frequency\",\n    title = \"Regimes of the World in 2022\",\n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## More about `geom_bar()`\n\n<br>\n\n-  `geom_bar()` is different from `geom_col()`\n-   Used to create bar plots where the height of the bar represents counts or frequencies of categorical variable\n-   By default, geom_bar() counts the number of occurrences of each category or group and plots it as the height of the bar\n-   Like `geom_histogram()`, `geom_bar()` only requires the x aesthetic (y is automatically calcualted for you)\n\n## Your Turn! \n\n- Expore the distribution of regimes for a different year\n- Preprocess your data to include only the year you are interested in\n- Visualize the distribution of regimes using `geom_bar()`\n- Use the `labs()` function to change title\n- What is different about the year that you chose relative to 2022?\n\n```{r}\n#| label: time1\n\nlibrary(countdown)\n\ncountdown(minutes = 5, \n          id = \"timer1\", \n          bottom = \"10%\", \n          right = \"10%\",\n          color_border = \"#fff\",\n          color_text = \"#fff\",\n          color_running_background = \"#42affa\",\n          color_running_text = \"black\",\n          color_finished_background = \"#E5D19D\",\n          color_finished_text = \"#00264A\")\n```\n\n\n## How do Regimes Vary by Region?\n\n<br>\n\n```{r}\n#| label: regime-region-1\n#| code-fold: true\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## How do Regimes Vary by Region?\n\n<br>\n\n```{r}\n#| label: regime-region-2\n#| echo: true\n#| output: false\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## How do Regimes Vary by Region?\n\n<br>\n\n```{r}\n#| label: regime-region-3\n#| echo: true\n#| output: false\n#| code-line-numbers: \"2\"\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## What Did We Just Do?\n\n<br>\n\n:::{.incremental}\n-  We used `geom_bar()` to visualize the distribution of regimes by region\n-  Essentially, we used two categorical variables to create a bar plot\n-  Regime type is...\n    -  ...an ordered categorical variable\n-  Region is... \n    - ...a nominal categorical variable\n:::\n\n## \n\nSome regions have more countries than others.  Why does this create an issue for telling a story with our data here?\n\n```{r}\n#| label: regime-region-4\n#| echo: false\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## Show Proportions Instead\n\n<br>\n\n```{r}\n#| label: regime-region-5\n#| code-fold: true\n#| code-line-numbers: \"3\"\nvdem2022 %>%\n  ggplot(., aes(x = region, fill = regime)) +\n      geom_bar(position = \"fill\") +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Proportion\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n\n## \n\nWe use `position = \"fill\"` to normalize the data and make the plot more interpretable...\n\n<br>\n\n```{r}\n#| label: regime-region-6\n#| echo: true\n#| output: false\n#| code-line-numbers: \"3\"\n\nvdem2022 %>%\n  ggplot(., aes(x = region, fill = regime)) +\n      geom_bar(position = \"fill\") +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Proportion\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## Your Turn! \n\n- Explore the distribution of regimes by region for a different year\n- Preprocess your data to include only the year you are interested in\n- Visualize the distribution of regimes using `geom_bar()` and `position = \"fill\"`\n- Use the `labs()` function to change title\n- What is different about the year that you chose relative to 2022?\n\n```{r}\n#| label: timer2\n\ncountdown(minutes = 5, \n          id = \"timer2\", \n          bottom = \"0%\", \n          right = \"5%\")\n```\n\n## Electoral Democracy Measure {.smaller}\n\n<br>\n\n-   To what extent is the ideal of electoral democracy in its fullest sense achieved?\n-   Measure runs from 0 (lowest) to 1 (highest) \n-   0.5 is a cutoff for distinguishing electoral democracy from electoral autocracy\n\n> The electoral principle of democracy seeks to embody the core value of making rulers responsive to citizens, achieved through electoral competition for the electorate's approval under circumstances when suffrage is extensive; political and civil society organizations can operate freely; elections are clean and not marred by fraud or systematic irregularities; and elections affect the composition of the chief executive of the country. In between elections, there is freedom of expression and an independent media capable of presenting alternative views on matters of political relevance.  -- V-Dem Codebook\n\n## Other High-Level V-Dem Measures\n\n<br>\n\n-   Liberal Democracy\n-   Egalitarian Democracy\n-   Participatory Democracy\n-   Deliberative Democracy\n\nAll continuous measures, ranging from 0 to 1. Let's take a look at how to summarize data like this!\n\n## Data Setup {.smaller}\n\n<br>\n\n```{r}\n#| label: setup2\n#| echo: true\n\n# Load packages \nlibrary(vdemdata)\nlibrary(tidyverse)\n\n# Create dataset for year 2022, with country name, year, and electoral dem\nvdem2022 <- vdem |>\n  filter(year == 2022)  |>\n  select(\n    country = country_name, \n    year, \n    polyarchy = v2x_polyarchy, \n    region = e_regionpol_6C \n    ) |>\n  mutate(region = case_match(region, \n                        1 ~ \"Eastern Europe\", \n                        2 ~ \"Latin America\",  \n                        3 ~ \"Middle East\",   \n                        4 ~ \"Africa\", \n                        5 ~ \"The West\", \n                        6 ~ \"Asia\")) \n```\n\n## Examine the Data\n\n<br>\n\n```{r}\n#| label: glimpse1\n#| echo: true\n\nglimpse(vdem2022)\n```\n\n## \n\n<br>\n\nHow can we summarize measures of democracy? :thinking:\n\n<br>\n\nWe could calculate the **mean**. \n\n```{r}\n#| label: mean\n#| echo: true\n\nvdem2022 |>\n  summarize(mean_democracy = mean(polyarchy))\n```\n\nThe mean is the average of the values. Common measure of central tendency but sensitive to outliers.\n\n## \n\n<br>\n\nHow can we summarize measures of democracy? :thinking:\n\n<br>\n\nWe could calculate the **median**. \n\n```{r}\n#| label: median\n#| echo: true\nvdem2022 |>\n  summarize(median_democracy = median(polyarchy))\n```\n\nThe median is the value that separates the higher half from the lower half of the data. \n\n## \n\n<br> \n\nWe can also describe the shape of the distribution...\n\n-   symmetric (e.g. normal)\n-   right-skewed\n-   left-skewed\n-   unimodal (one peak)\n-   bimodal (multiple peaks)\n\n## Histograms\n\n-  Used to represent the distribution of a continuous variable\n-  The x-axis represents the range of values\n-  The y-axis represents the frequency of each value\n-  The bars represent the number of observations in each range or \"bin\"\n-  The shape of the histogram can tell us a lot about the distribution of the data\n\n## Symmetric Distributions\n\n```{r}\n#| label: symmetric-1\n\nx <- tibble(x = rnorm(1000, 10))\nggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Normal Distribution (unimodal)\"\n  )\n```\n\n## Symmetric Distributions\n\n```{r}\n#| label: symmetric-2\n\nx <- tibble(x = runif(100000, -10, 10))\nggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = 2, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Uniform Distribution\"\n  )\n```\n\n## Skewed Distributions\n\n```{r}\n#| label: left-skewed\n\nx <- tibble(x = rbeta(10000, 100, 2))\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A LEFT Skewed Distribution\"\n  )\n```\n\n## Skewed Distributions\n\n```{r}\n#| label: right-skewed\n\nx <- tibble(x = rbeta(10000, 2, 100))\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A RIGHT Skewed Distribution\"\n  )\n```\n\n## Bimodal Distribution\n\n```{r}\n#| label: bimodal\n\nlibrary(truncnorm)\n\nnn <- 1e4\nset.seed(1)\nsims <- c(rtruncnorm(nn/2, a=1, b=5, mean=2, sd=.5),\n                    rtruncnorm(nn/2, a=1, b=5, mean=4, sd=.5))\n\nx <- tibble(x = sims)\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A BIMODAL Distribution\"\n  )\n```\n\n## When is the Mean Useful?\n\n```{r}\n#| label: normal-distribution\n\nx <- tibble(x = rnorm(1000, 10))\nmean <- summarize(x, mn = mean(x))\nggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Normal Distribution and the Mean\"\n  ) +\n  geom_vline(xintercept = 9.98, linewidth = 2, color = \"darkorange\")\n```\n\n## When is the Mean Useful?\n\n```{r}\n#| label: mean-right-skew\n \nx <- tibble(x = rbeta(10000,2, 100))\nmean <- summarize(x, mn = mean(x))\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A RIGHT Skewed Distribution and the Mean\"\n  ) +\n  geom_vline(xintercept = 0.0197, linewidth = 2, color = \"darkorange\")\n```\n\n## When is the Mean Useful?\n\n```{r}\n#| label: mean-bimodal\n\nlibrary(truncnorm)\n\nnn <- 1e4\nset.seed(1)\nsims <- c(rtruncnorm(nn/2, a=1, b=5, mean=2, sd=.5),\n                    rtruncnorm(nn/2, a=1, b=5, mean=4, sd=.5))\nmn <- mean(sims)\nx <- tibble(x = sims)\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A BIMODAL Distribution and the Mean\"\n  ) +\n    geom_vline(xintercept = mn, linewidth = 2, color = \"darkorange\")\n\n```\n\n## When is the `mean` useful?\n\n<br>\n\n-   The Mean works well as a summary statistic when the distribution is relatively symmetric\n-   Not as well when distributions are skewed or bimodal (or multi-modal)\n-   With skewed distributions, the mean is sensitive to extreme values\n-   The median is more robust\n\n## Lesson\n\n::: incremental\n-   Always look at your data!!\n-   When reading or in a presentation, ask yourself:\n    -   Does the mean make sense given the distribution of the measure?\n    -   Could extreme values in a skewed distribution make the mean not as useful?\n    -   Have the analysts shown you the distribution? If not, ask about it!\n:::\n\n## Visualize Our Measure\n\n<br>\n\n```{r}\n#| label: visualize-polyarchy \n\nmn <- mean(vdem2022$polyarchy)\nmed <- median(vdem2022$polyarchy)\n\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") + \n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = mn, linewidth = 1, color = \"darkorange\") +\n  theme_minimal()\n```\n\n## Visualize Our Measure\n\n<br>\n\n```{r}\n#| label: visualize-polyarchy-2\n#| echo: true\n#| eval: false\n\nmn <- mean(vdem2022$polyarchy)\nmed <- median(vdem2022$polyarchy)\n\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") +\n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = mn, linewidth = 1, color = \"darkorange\") +\n  theme_minimal() \n```\n\n## Visualize Our Measure\n\n<br>\n\n```{r}\n#| label: visualize-polyarchy-3\n#| echo: true\n#| eval: false\n#| code-line-numbers: \"1-2|5|12\" \n\nmn <- mean(vdem2022$polyarchy)\nmed <- median(vdem2022$polyarchy)\n\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") +\n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = mn, linewidth = 1, color = \"darkorange\") +\n  theme_minimal() \n```\n\n## Your Turn!\n\n- Look at the [V-Dem codebook](https://v-dem.net/documents/24/codebook_v13.pdf)\n- Select a different high-level measure of democracy\n- Preprocess your data to include tha measure in your data frame\n- Calculate the mean and median and store as a variable\n- Visualize the distribution of the measure\n- Include a vertical line for the mean\n- Now try the median\n\n```{r}\n#| label: timer3\n\nlibrary(countdown)\n\ncountdown(minutes = 5, \n          id = \"timer3\", \n          bottom = \"5%\", \n          right = \"10%\")\n```\n\n## Recap\n\n<br> \n\n- We can use statistics like mean or median to describe the center of a variable\n- We can visualize the entire distribution to charachterize the distribution of the variable\n- We should also say something about the **spread** of the distribution \n\n## Why Measure and Visualize Spread?\n\n```{r}\n#| label: spread\n\nlibrary(patchwork)\nx <- tibble(x = rnorm(1000, mean = 0, 2))\na <- ggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Distribution with Mean = 0\"\n  ) + xlim(-20, 20)\nx <- tibble(x = rnorm(1000,mean = 0, 10))\nb <- ggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Distribution with Mean = 0\"\n  ) + xlim(-20, 20)\na + b\n```\n\n## Measures of Spread: Range\n\n<br>\n\n-   Range (min and max values)\n-   Not ideal b/c does not tell us much about where most of the values are located\n\n```{r}\n#| label: min-max\n#| echo: true\n\nvdem2022 |>\n  summarize(min = min(polyarchy),\n            max = max(polyarchy))\n```\n\n## Measure of Spread: Interquartile Range\n\nIQR: 25th percentile - 75th percentile\n\n```{r echo=FALSE}\nlow <- quantile(vdem2022$polyarchy, .25)\nhigh <- quantile(vdem2022$polyarchy, .75)\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = low, linewidth = 2, color = \"darkorange\") + \n  geom_vline(xintercept = high, linewidth = 2, color = \"darkorange\") \n```\n\n## Interquartile Range\n\n- The middle 50 percent of the countries in the data lie between 0.262 and 0.747\n- The IQR (0.485) is the difference between the Q3 and Q1 values \n\n```{r}\n#| label: iqr\n#| echo: true\n\nvdem2022 %>% \n  summarize(IQRlow =  quantile(polyarchy, .25),\n            IQRhigh = quantile(polyarchy, .75),\n            IQRlength = IQR(polyarchy)\n          )\n```\n\n## Box Plot\n\n- A box plot is a graphical representation of the distribution based on the median and quartiles\n- It is a standardized way of displaying the distribution of data based on a five number summary: minimum, first quartile, median, third quartile, and maximum\n\n## Box Plot\n\n```{r}\n#| label: boxplot\n#| echo: true\n#| code-fold: true\n\nggplot(vdem2022, aes(x = \"\", y = polyarchy)) +\n  geom_boxplot(fill = \"steelblue\") + \n   labs(\n    x = \"\", \n    y = \"Electoral Democracy\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## Measure of Spead: Standard Deviation\n\n<br>\n\n-   Can think of it as something like the \"average distance\" of each data point from the mean\n\n```{r echo=TRUE}\nvdem2022 |>\n  summarize(mean = mean(polyarchy),\n            stdDev = sd(polyarchy))\n```\n\n## Standard Deviation\n\n<br>\n\n- A low standard deviation indicates that the values tend to be close to the mean\n- A high standard deviation indicates that the values are spread out over a wider range\n\n## Starting with Variance\n\n<br>\n\n- Variance is a step towards calculating the standard deviation.\n- It quantifies the average squared deviation of each number from the mean of the data set.\n\n## Calculating Deviation from the Mean\n\n- First, calculate the mean ($\\bar{X}$) of the dataset.\n- For each data point ($X_i$), calculate its deviation from the mean: $$e_i = X_i - \\bar{X}$$\n  - Example with a mean of 5:\n    - For a data point where $(X_i = 0): (0 - 5 = -5)$\n    - For a data point where $(X_i = 10): (10 - 5 = 5)$\n\n## Squaring the Deviations\n\n- Squaring each deviation ($e_i$) to eliminate negative values: $$e_i^2 = (X_i - \\bar{X})^2$$\n- Summing up all squared deviations: $$\\sum_{i=1}^{n} (X_i - \\bar{X})^2$$\n- This sum represents the total squared deviation from the mean.\n\n## Calculating the Variance\n\n- Divide the total squared deviation by $(n-1)$ (to account for the sample variance): $$\\text{Variance} = \\frac{1}{n-1} \\sum_{i=1}^{n} (X_i - \\bar{X})^2$$\n- Using $(n-1)$ ensures an unbiased estimate of the population variance when calculating from a sample.\n\n## Deriving the Standard Deviation\n\n<br>\n\n- The standard deviation is the square root of the variance: $$s = \\sqrt{\\frac{1}{n-1} \\sum_{i=1}^{n} (X_i - \\bar{X})^2}$$\n- Taking the square root converts the variance back to the units of the original data.\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-1\n#| echo: true\nx = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ne <- x - mean(x)\ne\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-2\n#| echo: true\nx = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ne_squared <- e^2\ne_squared\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-3\n#| echo: true\nx = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\nsum_e_squared <- sum(e_squared)\nsum_e_squared\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-4\n#| echo: true\nvariance <- sum_e_squared/(length(x)-1)\nvariance\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-5\n#| echo: true\nstandard_dev <- sqrt(variance)\nstandard_dev\nsd(x)\n```\n\n## Your Turn!\n\n<br>\n\n- Calculate measures of spread for the `polyarchy` variable in the V-Dem data (mean, median, IQR, standard deviation)\n- How would you interpret these measures?\n- Try a box plot for the `polyarchy` variable\n- Try another variable in the V-Dem data\n- How does it compare to `polyarchy`?\n\n\n```{r}\n#| label: timer4\n\ncountdown(minutes = 5, \n          id = \"timer4\", \n          bottom = \"10%\", \n          right = \"10%\")\n```\n\n## Calculating Statistics by groups\n\n<br>\n\n-   What if we want to describe electoral democracy and see how it differs by some different variable? For example, by world region, or by year?\n-   In this case we want to combine numerical summaries with categorical variables\n-   This brings us back to bar chart\n\n## Calculating Statistics by Groups\n\n-   Let's calculate the mean and median of electoral democracy in each world region\n-   For this, we add the *group_by()* to our previous code\n\n```{r}\n#| label: group-by-1\n#| echo: true\n#| code-line-numbers: \"2\"\nvdem2022 |>\n  group_by(region) |>\n  summarize(mean_dem = mean(polyarchy),\n            median_dem = median(polyarchy))\n```\n\n## Calculating Statistics by Groups\n\n-   Let's store our statistics as a new data object, *democracy_region*\n\n```{r}\n#| label: group-by-2\n#| echo: true\n#| code-line-numbers: \"1\"\ndemocracy_region <- vdem2022 |> \n  group_by(region) |>\n  summarize(mean_dem = mean(polyarchy),\n            median_dem = median(polyarchy))\n\ndemocracy_region\n```\n\n## Visualize using our Bar Chart Skills\n\n```{r}\n#| label: group-by-3\n#| echo: true\n#| code-fold: true\nggplot(democracy_region, aes(x = reorder(region, -mean_dem), y = mean_dem)) +\n  geom_col(fill = \"steelblue\") + \n  labs(\n    x = \"Region\", \n    y = \"Mean Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    ) + \n  theme_minimal()\n```\n\n## Numerical Variable by Group\n\nHow should we interpret this plot?\n```{r}\n#| label: ridge-plot\n#| echo: true\n#| code-fold: true\nlibrary(ggridges)\n#library(forcats)\n  ggplot(vdem2022, aes(x = polyarchy, y = region, fill = region)) +\n    geom_density_ridges() +\n  labs(\n    x = \"Electoral Democracy\",\n    y = \"Region\",\n    title = \"A Ridge Plot\",\n    caption = \"Source: V-Dem Institute\",\n  ) +\n  scale_fill_viridis_d() +\n  theme_minimal()\n```\n\n## Your Turn!\n\n<br>\n\n- Make a bar chart summarizing `polyarchy` or some other V-Dem variable\n- Now try your hand at a ridge plot\n\n```{r}\n#| label: timer5\n\ncountdown(minutes = 5, \n          id = \"timer5\", \n          bottom = \"10%\", \n          right = \"10%\")\n```\n\n","srcMarkdownNoYaml":"\n\n## Today's Classwork\n\n- Download classwork folder for today's class from [here](https://www.dropbox.com/scl/fo/9heicdr2yp11ztow65aku/h?rlkey=p70w8eg5wftr8vll0wkd8cxkf&dl=0)\n\n# Thinking About Data\n\n## \n\nWhat are some ways we can classify data? :sunglasses: :thought_balloon:\n\n. . .\n\n::: {.incremental}\n- anecdotal vs. representative\n- census vs. sample\n- observational vs. experimental\n- categorical vs. numerical\n- discrete vs. continuous\n- cross-sectional vs. time series\n- longitudinal vs. panel\n- unstructured vs. structured\n:::\n\n## \n\nWhat are some ways we can classify data? :sunglasses: :thought_balloon:\n\n- anecdotal vs. representative\n- census vs. sample\n- observational vs. experimental\n- **categorical vs. numerical**\n- **discrete vs. continuous**\n- cross-sectional vs. time series\n- longitudinal vs. panel\n- unstructured vs. structured\n\n## Variable Types\n    \n-   Categorical\n    - Binary - two categories\n    - Nominal - multiple unordered categories\n    - Ordinal - multiple ordered categories\n-   Numerical\n    - Continuous - fractional values (measurement data)\n    - Discrete - non-negative whole numbers (count data)\n\n## \n\nWhat types of variables are these? :thinking:\n\n::: {.incremental}\n-  Is a country a democracy? (yes/no)\n-  Polity (-10 to 10 in 1 unit increments)\n-  V-Dem Polyarchy (0-1 in 0.01 increments)\n-  V-Dem Regimes of the World Measure \n    - closed autocracy | electoral autocracy | electoral democracy | democracy\n- Number of protest events\n- Protest types (sit in, march, strike, etc.)\n:::\n\n# Categorical Data\n\n## V-Dem Regimes of the World Measure\n\n<br>\n\n-   Closed Autocracy\n-   Electoral Autocracy\n-   Electoral Democracy\n-   Liberal Democracy\n\n## Data Setup {.smaller}\n\n```{r}\n#| label: setup\n#| echo: true\n\nlibrary(tidyverse)\nlibrary(vdemdata)\n\nvdem2022 <- vdem |>\n  filter(year == 2022) |>\n  select(\n    country = country_name, \n    regime = v2x_regime, \n    region = e_regionpol_6C\n    ) |>\n  mutate(\n    region = case_match(region, # replace the values in region with country names\n                     1 ~ \"Eastern Europe\", \n                     2 ~ \"Latin America\",  \n                     3 ~ \"Middle East\",   \n                     4 ~ \"Africa\", \n                     5 ~ \"The West\", \n                     6 ~ \"Asia\")\n  ) |>\n  mutate(regime = case_match(regime,\n                    0 ~ \"Closed Autocracy\",\n                    1 ~ \"Electoral Autocracy\",\n                    2 ~  \"Electoral Democracy\",\n                    3 ~  \"Liberal Democracy\")\n  )\n```\n\n## Examine the Data\n\n<br>\n\n```{r}\n#| label: glimpse2\n#| echo: true\n\nglimpse(vdem2022)\n```\n\n## \n\n<br>\n\nLet's count the number of regimes by type...\n\n<br>\n\n```{r}\n#| label: regime-count\n#| echo: true\n\nvdem2022 |>\n  count(regime)\n```\n\n\n## \n\nNow let's visualize the distribution of regimes with a bar plot...\n\n```{r}\n#| label: regime-bar-1\n\nvdem2022 |>\n  ggplot(aes(x = regime)) +\n  geom_bar(fill = \"steelblue\") +\n  labs(\n    x = \"Regime\",\n    y = \"Frequency\",\n    title = \"Regimes of the World in 2022\",\n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## \n\nNow let's visualize the distribution of regimes with a bar plot...\n\n<br>\n\n```{r}\n#| label: regime-bar-2\n#| echo: true\n#| output: false \n\nvdem2022 |>\n  ggplot(aes(x = regime)) +\n  geom_bar(fill = \"steelblue\") +\n  labs(\n    x = \"Regime\",\n    y = \"Frequency\",\n    title = \"Regimes of the World in 2022\",\n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## \n\nNow let's visualize the distribution of regimes with a bar plot...\n\n<br>\n\n```{r}\n#| label: regime-bar-3\n#| echo: true\n#| output: false \n#| code-line-numbers: \"3\"\n\nvdem2022 |>\n  ggplot(aes(x = regime)) +\n  geom_bar(fill = \"steelblue\") +\n  labs(\n    x = \"Regime\",\n    y = \"Frequency\",\n    title = \"Regimes of the World in 2022\",\n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## More about `geom_bar()`\n\n<br>\n\n-  `geom_bar()` is different from `geom_col()`\n-   Used to create bar plots where the height of the bar represents counts or frequencies of categorical variable\n-   By default, geom_bar() counts the number of occurrences of each category or group and plots it as the height of the bar\n-   Like `geom_histogram()`, `geom_bar()` only requires the x aesthetic (y is automatically calcualted for you)\n\n## Your Turn! \n\n- Expore the distribution of regimes for a different year\n- Preprocess your data to include only the year you are interested in\n- Visualize the distribution of regimes using `geom_bar()`\n- Use the `labs()` function to change title\n- What is different about the year that you chose relative to 2022?\n\n```{r}\n#| label: time1\n\nlibrary(countdown)\n\ncountdown(minutes = 5, \n          id = \"timer1\", \n          bottom = \"10%\", \n          right = \"10%\",\n          color_border = \"#fff\",\n          color_text = \"#fff\",\n          color_running_background = \"#42affa\",\n          color_running_text = \"black\",\n          color_finished_background = \"#E5D19D\",\n          color_finished_text = \"#00264A\")\n```\n\n\n## How do Regimes Vary by Region?\n\n<br>\n\n```{r}\n#| label: regime-region-1\n#| code-fold: true\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## How do Regimes Vary by Region?\n\n<br>\n\n```{r}\n#| label: regime-region-2\n#| echo: true\n#| output: false\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## How do Regimes Vary by Region?\n\n<br>\n\n```{r}\n#| label: regime-region-3\n#| echo: true\n#| output: false\n#| code-line-numbers: \"2\"\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## What Did We Just Do?\n\n<br>\n\n:::{.incremental}\n-  We used `geom_bar()` to visualize the distribution of regimes by region\n-  Essentially, we used two categorical variables to create a bar plot\n-  Regime type is...\n    -  ...an ordered categorical variable\n-  Region is... \n    - ...a nominal categorical variable\n:::\n\n## \n\nSome regions have more countries than others.  Why does this create an issue for telling a story with our data here?\n\n```{r}\n#| label: regime-region-4\n#| echo: false\n\nvdem2022 |>\n  ggplot(aes(x = region, fill = regime)) +\n      geom_bar() +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Frequency\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## Show Proportions Instead\n\n<br>\n\n```{r}\n#| label: regime-region-5\n#| code-fold: true\n#| code-line-numbers: \"3\"\nvdem2022 %>%\n  ggplot(., aes(x = region, fill = regime)) +\n      geom_bar(position = \"fill\") +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Proportion\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n\n## \n\nWe use `position = \"fill\"` to normalize the data and make the plot more interpretable...\n\n<br>\n\n```{r}\n#| label: regime-region-6\n#| echo: true\n#| output: false\n#| code-line-numbers: \"3\"\n\nvdem2022 %>%\n  ggplot(., aes(x = region, fill = regime)) +\n      geom_bar(position = \"fill\") +\n  theme_minimal() +\n  labs(\n    x = \"Region\",\n    y = \"Proportion\",\n    title = \"Regimes of the World by World Region in 2022\",\n    caption = \"Source: V-Dem Institute\",\n    fill = \"Regime\"\n  ) +\n  scale_fill_viridis_d(option = \"inferno\", end = .8)\n```\n\n## Your Turn! \n\n- Explore the distribution of regimes by region for a different year\n- Preprocess your data to include only the year you are interested in\n- Visualize the distribution of regimes using `geom_bar()` and `position = \"fill\"`\n- Use the `labs()` function to change title\n- What is different about the year that you chose relative to 2022?\n\n```{r}\n#| label: timer2\n\ncountdown(minutes = 5, \n          id = \"timer2\", \n          bottom = \"0%\", \n          right = \"5%\")\n```\n\n## Electoral Democracy Measure {.smaller}\n\n<br>\n\n-   To what extent is the ideal of electoral democracy in its fullest sense achieved?\n-   Measure runs from 0 (lowest) to 1 (highest) \n-   0.5 is a cutoff for distinguishing electoral democracy from electoral autocracy\n\n> The electoral principle of democracy seeks to embody the core value of making rulers responsive to citizens, achieved through electoral competition for the electorate's approval under circumstances when suffrage is extensive; political and civil society organizations can operate freely; elections are clean and not marred by fraud or systematic irregularities; and elections affect the composition of the chief executive of the country. In between elections, there is freedom of expression and an independent media capable of presenting alternative views on matters of political relevance.  -- V-Dem Codebook\n\n## Other High-Level V-Dem Measures\n\n<br>\n\n-   Liberal Democracy\n-   Egalitarian Democracy\n-   Participatory Democracy\n-   Deliberative Democracy\n\nAll continuous measures, ranging from 0 to 1. Let's take a look at how to summarize data like this!\n\n## Data Setup {.smaller}\n\n<br>\n\n```{r}\n#| label: setup2\n#| echo: true\n\n# Load packages \nlibrary(vdemdata)\nlibrary(tidyverse)\n\n# Create dataset for year 2022, with country name, year, and electoral dem\nvdem2022 <- vdem |>\n  filter(year == 2022)  |>\n  select(\n    country = country_name, \n    year, \n    polyarchy = v2x_polyarchy, \n    region = e_regionpol_6C \n    ) |>\n  mutate(region = case_match(region, \n                        1 ~ \"Eastern Europe\", \n                        2 ~ \"Latin America\",  \n                        3 ~ \"Middle East\",   \n                        4 ~ \"Africa\", \n                        5 ~ \"The West\", \n                        6 ~ \"Asia\")) \n```\n\n## Examine the Data\n\n<br>\n\n```{r}\n#| label: glimpse1\n#| echo: true\n\nglimpse(vdem2022)\n```\n\n## \n\n<br>\n\nHow can we summarize measures of democracy? :thinking:\n\n<br>\n\nWe could calculate the **mean**. \n\n```{r}\n#| label: mean\n#| echo: true\n\nvdem2022 |>\n  summarize(mean_democracy = mean(polyarchy))\n```\n\nThe mean is the average of the values. Common measure of central tendency but sensitive to outliers.\n\n## \n\n<br>\n\nHow can we summarize measures of democracy? :thinking:\n\n<br>\n\nWe could calculate the **median**. \n\n```{r}\n#| label: median\n#| echo: true\nvdem2022 |>\n  summarize(median_democracy = median(polyarchy))\n```\n\nThe median is the value that separates the higher half from the lower half of the data. \n\n## \n\n<br> \n\nWe can also describe the shape of the distribution...\n\n-   symmetric (e.g. normal)\n-   right-skewed\n-   left-skewed\n-   unimodal (one peak)\n-   bimodal (multiple peaks)\n\n## Histograms\n\n-  Used to represent the distribution of a continuous variable\n-  The x-axis represents the range of values\n-  The y-axis represents the frequency of each value\n-  The bars represent the number of observations in each range or \"bin\"\n-  The shape of the histogram can tell us a lot about the distribution of the data\n\n## Symmetric Distributions\n\n```{r}\n#| label: symmetric-1\n\nx <- tibble(x = rnorm(1000, 10))\nggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Normal Distribution (unimodal)\"\n  )\n```\n\n## Symmetric Distributions\n\n```{r}\n#| label: symmetric-2\n\nx <- tibble(x = runif(100000, -10, 10))\nggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = 2, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Uniform Distribution\"\n  )\n```\n\n## Skewed Distributions\n\n```{r}\n#| label: left-skewed\n\nx <- tibble(x = rbeta(10000, 100, 2))\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A LEFT Skewed Distribution\"\n  )\n```\n\n## Skewed Distributions\n\n```{r}\n#| label: right-skewed\n\nx <- tibble(x = rbeta(10000, 2, 100))\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A RIGHT Skewed Distribution\"\n  )\n```\n\n## Bimodal Distribution\n\n```{r}\n#| label: bimodal\n\nlibrary(truncnorm)\n\nnn <- 1e4\nset.seed(1)\nsims <- c(rtruncnorm(nn/2, a=1, b=5, mean=2, sd=.5),\n                    rtruncnorm(nn/2, a=1, b=5, mean=4, sd=.5))\n\nx <- tibble(x = sims)\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A BIMODAL Distribution\"\n  )\n```\n\n## When is the Mean Useful?\n\n```{r}\n#| label: normal-distribution\n\nx <- tibble(x = rnorm(1000, 10))\nmean <- summarize(x, mn = mean(x))\nggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Normal Distribution and the Mean\"\n  ) +\n  geom_vline(xintercept = 9.98, linewidth = 2, color = \"darkorange\")\n```\n\n## When is the Mean Useful?\n\n```{r}\n#| label: mean-right-skew\n \nx <- tibble(x = rbeta(10000,2, 100))\nmean <- summarize(x, mn = mean(x))\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A RIGHT Skewed Distribution and the Mean\"\n  ) +\n  geom_vline(xintercept = 0.0197, linewidth = 2, color = \"darkorange\")\n```\n\n## When is the Mean Useful?\n\n```{r}\n#| label: mean-bimodal\n\nlibrary(truncnorm)\n\nnn <- 1e4\nset.seed(1)\nsims <- c(rtruncnorm(nn/2, a=1, b=5, mean=2, sd=.5),\n                    rtruncnorm(nn/2, a=1, b=5, mean=4, sd=.5))\nmn <- mean(sims)\nx <- tibble(x = sims)\nggplot(x, aes(x = x )) +\n  geom_histogram( fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A BIMODAL Distribution and the Mean\"\n  ) +\n    geom_vline(xintercept = mn, linewidth = 2, color = \"darkorange\")\n\n```\n\n## When is the `mean` useful?\n\n<br>\n\n-   The Mean works well as a summary statistic when the distribution is relatively symmetric\n-   Not as well when distributions are skewed or bimodal (or multi-modal)\n-   With skewed distributions, the mean is sensitive to extreme values\n-   The median is more robust\n\n## Lesson\n\n::: incremental\n-   Always look at your data!!\n-   When reading or in a presentation, ask yourself:\n    -   Does the mean make sense given the distribution of the measure?\n    -   Could extreme values in a skewed distribution make the mean not as useful?\n    -   Have the analysts shown you the distribution? If not, ask about it!\n:::\n\n## Visualize Our Measure\n\n<br>\n\n```{r}\n#| label: visualize-polyarchy \n\nmn <- mean(vdem2022$polyarchy)\nmed <- median(vdem2022$polyarchy)\n\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") + \n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = mn, linewidth = 1, color = \"darkorange\") +\n  theme_minimal()\n```\n\n## Visualize Our Measure\n\n<br>\n\n```{r}\n#| label: visualize-polyarchy-2\n#| echo: true\n#| eval: false\n\nmn <- mean(vdem2022$polyarchy)\nmed <- median(vdem2022$polyarchy)\n\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") +\n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = mn, linewidth = 1, color = \"darkorange\") +\n  theme_minimal() \n```\n\n## Visualize Our Measure\n\n<br>\n\n```{r}\n#| label: visualize-polyarchy-3\n#| echo: true\n#| eval: false\n#| code-line-numbers: \"1-2|5|12\" \n\nmn <- mean(vdem2022$polyarchy)\nmed <- median(vdem2022$polyarchy)\n\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") +\n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = mn, linewidth = 1, color = \"darkorange\") +\n  theme_minimal() \n```\n\n## Your Turn!\n\n- Look at the [V-Dem codebook](https://v-dem.net/documents/24/codebook_v13.pdf)\n- Select a different high-level measure of democracy\n- Preprocess your data to include tha measure in your data frame\n- Calculate the mean and median and store as a variable\n- Visualize the distribution of the measure\n- Include a vertical line for the mean\n- Now try the median\n\n```{r}\n#| label: timer3\n\nlibrary(countdown)\n\ncountdown(minutes = 5, \n          id = \"timer3\", \n          bottom = \"5%\", \n          right = \"10%\")\n```\n\n## Recap\n\n<br> \n\n- We can use statistics like mean or median to describe the center of a variable\n- We can visualize the entire distribution to charachterize the distribution of the variable\n- We should also say something about the **spread** of the distribution \n\n## Why Measure and Visualize Spread?\n\n```{r}\n#| label: spread\n\nlibrary(patchwork)\nx <- tibble(x = rnorm(1000, mean = 0, 2))\na <- ggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Distribution with Mean = 0\"\n  ) + xlim(-20, 20)\nx <- tibble(x = rnorm(1000,mean = 0, 10))\nb <- ggplot(x, aes(x = x )) +\n  geom_histogram(binwidth = .5, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"A made up measure\", \n    y = \"Frequency\", \n    title = \"A Distribution with Mean = 0\"\n  ) + xlim(-20, 20)\na + b\n```\n\n## Measures of Spread: Range\n\n<br>\n\n-   Range (min and max values)\n-   Not ideal b/c does not tell us much about where most of the values are located\n\n```{r}\n#| label: min-max\n#| echo: true\n\nvdem2022 |>\n  summarize(min = min(polyarchy),\n            max = max(polyarchy))\n```\n\n## Measure of Spread: Interquartile Range\n\nIQR: 25th percentile - 75th percentile\n\n```{r echo=FALSE}\nlow <- quantile(vdem2022$polyarchy, .25)\nhigh <- quantile(vdem2022$polyarchy, .75)\nggplot(vdem2022, aes(x = polyarchy )) +\n  geom_histogram(binwidth = .05, fill = \"steelblue\") + theme_bw() +\n   labs(\n    x = \"Electoral Democracy\", \n    y = \"Frequency\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) + \n  geom_vline(xintercept = low, linewidth = 2, color = \"darkorange\") + \n  geom_vline(xintercept = high, linewidth = 2, color = \"darkorange\") \n```\n\n## Interquartile Range\n\n- The middle 50 percent of the countries in the data lie between 0.262 and 0.747\n- The IQR (0.485) is the difference between the Q3 and Q1 values \n\n```{r}\n#| label: iqr\n#| echo: true\n\nvdem2022 %>% \n  summarize(IQRlow =  quantile(polyarchy, .25),\n            IQRhigh = quantile(polyarchy, .75),\n            IQRlength = IQR(polyarchy)\n          )\n```\n\n## Box Plot\n\n- A box plot is a graphical representation of the distribution based on the median and quartiles\n- It is a standardized way of displaying the distribution of data based on a five number summary: minimum, first quartile, median, third quartile, and maximum\n\n## Box Plot\n\n```{r}\n#| label: boxplot\n#| echo: true\n#| code-fold: true\n\nggplot(vdem2022, aes(x = \"\", y = polyarchy)) +\n  geom_boxplot(fill = \"steelblue\") + \n   labs(\n    x = \"\", \n    y = \"Electoral Democracy\", \n    title = \"Distribution of Electoral Democracy in 2022\", \n    caption = \"Source: V-Dem Institute\"\n  ) +\n  theme_minimal()\n```\n\n## Measure of Spead: Standard Deviation\n\n<br>\n\n-   Can think of it as something like the \"average distance\" of each data point from the mean\n\n```{r echo=TRUE}\nvdem2022 |>\n  summarize(mean = mean(polyarchy),\n            stdDev = sd(polyarchy))\n```\n\n## Standard Deviation\n\n<br>\n\n- A low standard deviation indicates that the values tend to be close to the mean\n- A high standard deviation indicates that the values are spread out over a wider range\n\n## Starting with Variance\n\n<br>\n\n- Variance is a step towards calculating the standard deviation.\n- It quantifies the average squared deviation of each number from the mean of the data set.\n\n## Calculating Deviation from the Mean\n\n- First, calculate the mean ($\\bar{X}$) of the dataset.\n- For each data point ($X_i$), calculate its deviation from the mean: $$e_i = X_i - \\bar{X}$$\n  - Example with a mean of 5:\n    - For a data point where $(X_i = 0): (0 - 5 = -5)$\n    - For a data point where $(X_i = 10): (10 - 5 = 5)$\n\n## Squaring the Deviations\n\n- Squaring each deviation ($e_i$) to eliminate negative values: $$e_i^2 = (X_i - \\bar{X})^2$$\n- Summing up all squared deviations: $$\\sum_{i=1}^{n} (X_i - \\bar{X})^2$$\n- This sum represents the total squared deviation from the mean.\n\n## Calculating the Variance\n\n- Divide the total squared deviation by $(n-1)$ (to account for the sample variance): $$\\text{Variance} = \\frac{1}{n-1} \\sum_{i=1}^{n} (X_i - \\bar{X})^2$$\n- Using $(n-1)$ ensures an unbiased estimate of the population variance when calculating from a sample.\n\n## Deriving the Standard Deviation\n\n<br>\n\n- The standard deviation is the square root of the variance: $$s = \\sqrt{\\frac{1}{n-1} \\sum_{i=1}^{n} (X_i - \\bar{X})^2}$$\n- Taking the square root converts the variance back to the units of the original data.\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-1\n#| echo: true\nx = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ne <- x - mean(x)\ne\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-2\n#| echo: true\nx = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\ne_squared <- e^2\ne_squared\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-3\n#| echo: true\nx = c(0, 1, 2, 3, 4, 5, 6, 7, 8, 9, 10)\nsum_e_squared <- sum(e_squared)\nsum_e_squared\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-4\n#| echo: true\nvariance <- sum_e_squared/(length(x)-1)\nvariance\n```\n\n## Standard Deviation Simple Example\n\n<br>\n\n```{r}\n#| label: std-dev-5\n#| echo: true\nstandard_dev <- sqrt(variance)\nstandard_dev\nsd(x)\n```\n\n## Your Turn!\n\n<br>\n\n- Calculate measures of spread for the `polyarchy` variable in the V-Dem data (mean, median, IQR, standard deviation)\n- How would you interpret these measures?\n- Try a box plot for the `polyarchy` variable\n- Try another variable in the V-Dem data\n- How does it compare to `polyarchy`?\n\n\n```{r}\n#| label: timer4\n\ncountdown(minutes = 5, \n          id = \"timer4\", \n          bottom = \"10%\", \n          right = \"10%\")\n```\n\n## Calculating Statistics by groups\n\n<br>\n\n-   What if we want to describe electoral democracy and see how it differs by some different variable? For example, by world region, or by year?\n-   In this case we want to combine numerical summaries with categorical variables\n-   This brings us back to bar chart\n\n## Calculating Statistics by Groups\n\n-   Let's calculate the mean and median of electoral democracy in each world region\n-   For this, we add the *group_by()* to our previous code\n\n```{r}\n#| label: group-by-1\n#| echo: true\n#| code-line-numbers: \"2\"\nvdem2022 |>\n  group_by(region) |>\n  summarize(mean_dem = mean(polyarchy),\n            median_dem = median(polyarchy))\n```\n\n## Calculating Statistics by Groups\n\n-   Let's store our statistics as a new data object, *democracy_region*\n\n```{r}\n#| label: group-by-2\n#| echo: true\n#| code-line-numbers: \"1\"\ndemocracy_region <- vdem2022 |> \n  group_by(region) |>\n  summarize(mean_dem = mean(polyarchy),\n            median_dem = median(polyarchy))\n\ndemocracy_region\n```\n\n## Visualize using our Bar Chart Skills\n\n```{r}\n#| label: group-by-3\n#| echo: true\n#| code-fold: true\nggplot(democracy_region, aes(x = reorder(region, -mean_dem), y = mean_dem)) +\n  geom_col(fill = \"steelblue\") + \n  labs(\n    x = \"Region\", \n    y = \"Mean Polyarchy Score\", \n    title = \"Democracy by region, 1990 - present\", \n    caption = \"Source: V-Dem Institute\"\n    ) + \n  theme_minimal()\n```\n\n## Numerical Variable by Group\n\nHow should we interpret this plot?\n```{r}\n#| label: ridge-plot\n#| echo: true\n#| code-fold: true\nlibrary(ggridges)\n#library(forcats)\n  ggplot(vdem2022, aes(x = polyarchy, y = region, fill = region)) +\n    geom_density_ridges() +\n  labs(\n    x = \"Electoral Democracy\",\n    y = \"Region\",\n    title = \"A Ridge Plot\",\n    caption = \"Source: V-Dem Institute\",\n  ) +\n  scale_fill_viridis_d() +\n  theme_minimal()\n```\n\n## Your Turn!\n\n<br>\n\n- Make a bar chart summarizing `polyarchy` or some other V-Dem variable\n- Now try your hand at a ridge plot\n\n```{r}\n#| label: timer5\n\ncountdown(minutes = 5, \n          id = \"timer5\", \n          bottom = \"10%\", \n          right = \"10%\")\n```\n\n"},"formats":{"revealjs":{"identifier":{"display-name":"RevealJS","target-format":"revealjs","base-format":"revealjs"},"execute":{"fig-width":10,"fig-height":5,"fig-format":"retina","fig-dpi":96,"df-print":"default","error":false,"eval":true,"cache":null,"freeze":"auto","echo":false,"output":true,"warning":false,"include":true,"keep-md":false,"keep-ipynb":false,"ipynb":null,"enabled":null,"daemon":null,"daemon-restart":false,"debug":false,"ipynb-filters":[],"ipynb-shell-interactivity":null,"plotly-connected":true,"message":false,"engine":"knitr"},"render":{"keep-tex":false,"keep-typ":false,"keep-source":false,"keep-hidden":false,"prefer-html":false,"output-divs":true,"output-ext":"html","fig-align":"default","fig-pos":null,"fig-env":null,"code-fold":"none","code-overflow":"scroll","code-link":false,"code-line-numbers":true,"code-tools":false,"tbl-colwidths":"auto","merge-includes":true,"inline-includes":false,"preserve-yaml":false,"latex-auto-mk":true,"latex-auto-install":true,"latex-clean":true,"latex-min-runs":1,"latex-max-runs":10,"latex-makeindex":"makeindex","latex-makeindex-opts":[],"latex-tlmgr-opts":[],"latex-input-paths":[],"latex-output-dir":null,"link-external-icon":false,"link-external-newwindow":false,"self-contained-math":false,"format-resources":[]},"pandoc":{"standalone":true,"wrap":"none","default-image-extension":"png","html-math-method":{"method":"mathjax","url":"https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.0/MathJax.js?config=TeX-AMS_HTML-full"},"slide-level":2,"to":"revealjs","from":"markdown+emoji","output-file":"week-3.1.html"},"language":{"toc-title-document":"Table of contents","toc-title-website":"On this page","related-formats-title":"Other Formats","related-notebooks-title":"Notebooks","source-notebooks-prefix":"Source","other-links-title":"Other Links","code-links-title":"Code Links","launch-dev-container-title":"Launch Dev Container","launch-binder-title":"Launch Binder","article-notebook-label":"Article Notebook","notebook-preview-download":"Download Notebook","notebook-preview-download-src":"Download Source","notebook-preview-back":"Back to Article","manuscript-meca-bundle":"MECA Bundle","section-title-abstract":"Abstract","section-title-appendices":"Appendices","section-title-footnotes":"Footnotes","section-title-references":"References","section-title-reuse":"Reuse","section-title-copyright":"Copyright","section-title-citation":"Citation","appendix-attribution-cite-as":"For attribution, please cite this work as:","appendix-attribution-bibtex":"BibTeX citation:","title-block-author-single":"Author","title-block-author-plural":"Authors","title-block-affiliation-single":"Affiliation","title-block-affiliation-plural":"Affiliations","title-block-published":"Published","title-block-modified":"Modified","title-block-keywords":"Keywords","callout-tip-title":"Tip","callout-note-title":"Note","callout-warning-title":"Warning","callout-important-title":"Important","callout-caution-title":"Caution","code-summary":"Code","code-tools-menu-caption":"Code","code-tools-show-all-code":"Show All Code","code-tools-hide-all-code":"Hide All Code","code-tools-view-source":"View Source","code-tools-source-code":"Source Code","code-line":"Line","code-lines":"Lines","copy-button-tooltip":"Copy to Clipboard","copy-button-tooltip-success":"Copied!","repo-action-links-edit":"Edit this page","repo-action-links-source":"View source","repo-action-links-issue":"Report an issue","back-to-top":"Back to top","search-no-results-text":"No results","search-matching-documents-text":"matching documents","search-copy-link-title":"Copy link to search","search-hide-matches-text":"Hide additional matches","search-more-match-text":"more match in this document","search-more-matches-text":"more matches in this document","search-clear-button-title":"Clear","search-text-placeholder":"","search-detached-cancel-button-title":"Cancel","search-submit-button-title":"Submit","search-label":"Search","toggle-section":"Toggle section","toggle-sidebar":"Toggle sidebar navigation","toggle-dark-mode":"Toggle dark mode","toggle-reader-mode":"Toggle reader mode","toggle-navigation":"Toggle navigation","crossref-fig-title":"Figure","crossref-tbl-title":"Table","crossref-lst-title":"Listing","crossref-thm-title":"Theorem","crossref-lem-title":"Lemma","crossref-cor-title":"Corollary","crossref-prp-title":"Proposition","crossref-cnj-title":"Conjecture","crossref-def-title":"Definition","crossref-exm-title":"Example","crossref-exr-title":"Exercise","crossref-ch-prefix":"Chapter","crossref-apx-prefix":"Appendix","crossref-sec-prefix":"Section","crossref-eq-prefix":"Equation","crossref-lof-title":"List of Figures","crossref-lot-title":"List of Tables","crossref-lol-title":"List of Listings","environment-proof-title":"Proof","environment-remark-title":"Remark","environment-solution-title":"Solution","listing-page-order-by":"Order By","listing-page-order-by-default":"Default","listing-page-order-by-date-asc":"Oldest","listing-page-order-by-date-desc":"Newest","listing-page-order-by-number-desc":"High to Low","listing-page-order-by-number-asc":"Low to High","listing-page-field-date":"Date","listing-page-field-title":"Title","listing-page-field-description":"Description","listing-page-field-author":"Author","listing-page-field-filename":"File Name","listing-page-field-filemodified":"Modified","listing-page-field-subtitle":"Subtitle","listing-page-field-readingtime":"Reading Time","listing-page-field-wordcount":"Word Count","listing-page-field-categories":"Categories","listing-page-minutes-compact":"{0} min","listing-page-category-all":"All","listing-page-no-matches":"No matching items","listing-page-words":"{0} words"},"metadata":{"lang":"en","fig-responsive":false,"quarto-version":"1.4.533","auto-stretch":true,"editor":"source","title":"Categorical Data","date":"today","date-format":"long","footer":"[IAFF 6501 Website](https://quant4ia.rocks)","logo":"images/iaff6501-logo.png","theme":["simple","custom.scss"],"transition":"fade","slideNumber":true,"chalkboard":true}}},"projectFormats":["html"]}